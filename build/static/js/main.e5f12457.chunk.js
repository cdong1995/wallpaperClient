(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e,t,a){e.exports=a(448)},448:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(10),l=a.n(r),s=a(15),c=a(16),i=a(18),u=a(17),m=a(19),d=(a(58),a(22)),p=(a(202),a(191)),h=(a(69),a(41)),f=(a(83),a(9)),g=(a(132),a(49)),v=a(454),y=a(27),w=a.n(y),E=g.a.Item,b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={Username:"",Password:""},a.handleGetUsername=function(e){a.setState({Username:e.target.value})},a.handleGetPassword=function(e){a.setState({Password:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||w()({url:"http://35.243.234.68:8000/login",method:"post",data:{email:a.state.Username,password:a.state.Password},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a.props.history.push("/index")}).catch(function(e){console.log(e)})})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return o.a.createElement("div",null,o.a.createElement(g.a,{id:"login-form",onSubmit:this.handleSubmit,className:"login-form",style:{width:"40%",marginLeft:"30%",marginTop:"10%"}},o.a.createElement("h1",{style:{marginLeft:"10%"}}," Welcome to Wallpaper Workshop!"),o.a.createElement(E,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(o.a.createElement(h.a,{prefix:o.a.createElement(f.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",type:"text",onChange:this.handleGetUsername}))),o.a.createElement(E,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(o.a.createElement(h.a,{prefix:o.a.createElement(f.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onChange:this.handleGetPassword}))),o.a.createElement(E,null,e("remember",{valuePropName:"checked",initialValue:!0})(o.a.createElement(p.a,{style:{float:"left"}},"Remember me")),o.a.createElement("a",{className:"login-form-forgot",href:"",style:{float:"right"}},"Forgot password?"),o.a.createElement("div",null,o.a.createElement(d.a,{id:"login-btn",onClick:this.handleSubmit,type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"Log in")),"Or",o.a.createElement(v.a,{to:"/register",id:"reg-link"}," register now!"))))}}]),t}(o.a.Component),C=g.a.create()(b),k=g.a.Item,O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={confirmDirty:!1,autoCompleteResult:[],Email:"",Password:"",confirmPassword:""},a.handleGetEmail=function(e){a.setState({Email:e.target.value})},a.handleGetPassword=function(e){a.setState({Password:e.target.value})},a.handleGetConfirmed=function(e){a.setState({confirmPassword:e.target.value})},a.handleGetUsername=function(e){a.setState({username:e.target.value})},a.handleRegister=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?console.log(e.message):w()({url:"http://35.243.234.68:8000/register",method:"post",data:{email:a.state.Email,username:a.state.username,password:a.state.Password},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){a.props.history.push("/")}).catch(function(e){console.log(e)})})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var o=a.props.form;t&&t!==o.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,n){var o=a.props.form;t&&a.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),n()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return o.a.createElement(g.a,{id:"reg-form",onSubmit:this.handleRegister,style:{width:"40%",marginLeft:"25%",marginTop:"10%"}},o.a.createElement(k,Object.assign({},t,{label:"E-mail"}),e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(o.a.createElement(h.a,{onChange:this.handleGetEmail}))),o.a.createElement(k,Object.assign({},t,{label:"Username"}),e("username",{rules:[{required:!0,message:"Please input your username!"}]})(o.a.createElement(h.a,{onChange:this.handleGetUsername}))),o.a.createElement(k,Object.assign({},t,{label:"Password"}),e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(o.a.createElement(h.a,{type:"password",onChange:this.handleGetPassword}))),o.a.createElement(k,Object.assign({},t,{label:"Confirm Password"}),e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(o.a.createElement(h.a,{type:"password",onBlur:this.handleConfirmBlur,onChange:this.handleGetConfirmed}))),o.a.createElement(k,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},o.a.createElement(d.a,{id:"reg-btn",type:"primary",htmlType:"submit"},"Register"),o.a.createElement(v.a,{to:"/"}," Go back to login!")))}}]),t}(o.a.Component),j=g.a.create()(O),S=a(452),x=a(455),P=a(337),U=(a(339),a(56)),I=(a(344),a(57)),L=a(453),R=(a(127),a(43)),D=(a(349),a(190)),T=(a(450),a(189)),F=(a(449),a(131)),q=(a(451),a(130)),N=window.require("electron").ipcRenderer,G=q.a.Meta,A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={color1:"#000000",color2:"#000000",search:!1,numLikes:0,numCollects:0,picUrl:"",wid:"",author:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleLike",value:function(e,t){var a;if("#000000"===this.state.color1)this.setState({color1:"#eb2f96",numLikes:this.state.numLikes+1}),a=1;else{if("#eb2f96"!==this.state.color1)return;this.setState({color1:"#000000",numLikes:this.state.numLikes-1}),a=-1}w()({url:"http://35.243.234.68:8000/addLike",method:"post",data:{wid:e,action:a},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("success")}).catch(function(e){console.log(e)})}},{key:"handleCollect",value:function(e){var t;if("#000000"===this.state.color2)this.setState({color2:"#eb2f96",numCollects:this.state.numCollects+1}),t=1;else{if("#eb2f96"!==this.state.color2)return;this.setState({color2:"#000000",numCollects:this.state.numCollects-1}),t=-1,console.log("wojianle!!!"+t)}w()({url:"http://35.243.234.68:8000/addCollect",method:"post",data:{wid:e,action:t},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("success")}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){var e=this.props.item;e.hasOwnProperty("urls")?this.setState({picUrl:e.urls.full,color1:"#ffffff",color2:"#ffffff",search:!0}):e.hasOwnProperty("url")&&(this.setState({picUrl:e.url,numLikes:e.likes,numCollects:e.collects,wid:e._id,author:e.username}),!0===e.isLiked?this.setState({color1:"#eb2f96"}):this.setState({color1:"#000000"}),!0===e.isCollected?this.setState({color2:"#eb2f96"}):this.setState({color2:"#000000"}))}},{key:"componentDidUpdate",value:function(e,t){if(e.item!==this.props.item){var a=this.props.item;a.hasOwnProperty("urls")?this.setState({picUrl:a.urls.full,color1:"#ffffff",color2:"#ffffff",search:!0}):a.hasOwnProperty("url")&&(this.setState({picUrl:a.url,numLikes:a.likes,numCollects:a.collects,wid:a._id,author:a.username}),!0===a.isLiked?this.setState({color1:"#eb2f96"}):this.setState({color1:"#000000"}),!0===a.isCollected?this.setState({color2:"#eb2f96"}):this.setState({color2:"#000000"}))}}},{key:"render",value:function(){var e,t=this,a=this.props.id;this.props.item;return this.state.search||(e=o.a.createElement(G,{title:"Author:  "+this.state.author,description:this.state.numLikes+"  Likes     "+this.state.numCollects+"  Collects"})),o.a.createElement("div",{id:"pic_"+a,name:this.state.wid},o.a.createElement(q.a,{type:"inner",style:{width:322},cover:o.a.createElement("img",{alt:"example",src:this.state.picUrl,style:{width:"auto",height:180}}),actions:[o.a.createElement(f.a,{type:"heart",id:"like_"+a,theme:"twoTone",twoToneColor:this.state.color1,onClick:function(){t.handleLike(t.state.wid,a)}}),o.a.createElement(f.a,{type:"folder-add",id:"collect_"+a,theme:"twoTone",twoToneColor:this.state.color2,onClick:function(){return t.handleCollect(t.state.wid)}}),o.a.createElement(f.a,{type:"setting",theme:"twoTone",twoToneColor:"#000000",onClick:function(){N.send("download-image",t.state.picUrl)}})]},e))}}]),t}(o.a.Component),M=function(e){var t=e.pics;return o.a.createElement(F.a,{grid:{gutter:8,xs:1,sm:1,md:2,lg:2,xl:3,xxl:4},dataSource:t,renderItem:function(e,t){return o.a.createElement(F.a.Item,{type:"flex",align:"middle"},o.a.createElement(A,{id:t,key:t,item:e}))}})},_=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).handleCancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})},e.handleChange=function(t){var a=t.fileList;return e.setState({fileList:a})},e.uploadImage=function(e){console.log(e);var t=new FileReader;t.readAsDataURL(e),t.onload=function(){console.log(t.result),w()({url:"http://35.243.234.68:8000/upload",method:"post",data:{image:t.result},transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).catch(function(e){console.log(e)})}},e.state={posts:[],previewVisible:!1,previewImage:"",fileList:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("http://35.243.234.68:8000/wallpapers/upload").then(function(t){console.log(t.data),e.setState({posts:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,r=o.a.createElement("div",null,o.a.createElement(f.a,{type:"plus"}),o.a.createElement("div",{className:"ant-upload-text"},"Upload"));return o.a.createElement("div",null,o.a.createElement(T.a,{action:this.uploadImage,accept:"image/*",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length<0?null:r),o.a.createElement(D.a,{visible:t,footer:null,onCancel:this.handleCancel},o.a.createElement("img",{alt:" ",style:{width:"100%"},src:a})),o.a.createElement(R.a,null),o.a.createElement(M,{pics:this.state.posts}))}}]),t}(o.a.Component),V=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={posts:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("http://35.243.234.68:8000/wallpapers/likes").then(function(t){e.setState({posts:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(M,{pics:this.state.posts}))}}]),t}(o.a.Component),W=window.require("electron").ipcRenderer,B=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={posts:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("http://35.243.234.68:8000/wallpapers/collections").then(function(t){e.setState({posts:t.data})}).catch(function(e){console.log(e)})}},{key:"handleDownload",value:function(){var e;e=this.state.posts.map(function(e){return e.url}),W.send("download_all",e)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(d.a,{type:"primary",icon:"download",size:"large",onClick:function(){return e.handleDownload()}},"Download"),o.a.createElement(R.a,null),o.a.createElement(M,{pics:this.state.posts}))}}]),t}(o.a.Component),J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={posts:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("http://35.243.234.68:8000/wallpapers/index").then(function(t){console.log(t),console.log(t.data),e.setState({posts:t.data})}).catch(function(e){console.log(e)}),console.log(this.state.posts)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(M,{pics:this.state.posts}))}}]),t}(o.a.Component),z=(a(430),a(192)),H=(a(159),a(48)),K=H.a.Option,Q=window.require("electron").ipcRenderer,X=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={fre:"3",msr:"minute"},a.handleChange1=function(e){console.log("selected ".concat(e)),a.setState({fre:e})},a.handleChange2=function(e){console.log("selected ".concat(e)),a.setState({msr:e})},a.setPeriod=function(){Q.send("change_period",a.state.fre,a.state.msr)},a.setStop=function(){Q.send("stop_autochanger","")},a.selectFolder=function(e){Q.send("set_folder",e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{marginTop:150}},o.a.createElement("div",null,o.a.createElement(d.a,{type:"primary",icon:"download",size:"large",onClick:function(){return e.selectFolder("download")}},"Select Download Folder"),o.a.createElement(R.a,{type:"vertical"}),o.a.createElement(d.a,{type:"primary",icon:"download",size:"large",onClick:function(){return e.selectFolder("autoChanger")}},"Change Wallpapers From Folder")),o.a.createElement(R.a,null),o.a.createElement("h3",null," Set the frequency of wallpaper changing automatically:"),o.a.createElement("br",null),"Every",o.a.createElement(z.a,{min:1,max:100,defaultValue:3,onChange:this.handleChange1}),o.a.createElement(H.a,{defaultValue:"minutes",style:{width:120},onChange:this.handleChange2},o.a.createElement(K,{value:"seconds"},"seconds"),o.a.createElement(K,{value:"minutes"},"minutes"),o.a.createElement(K,{value:"hours"},"hours"),o.a.createElement(K,{value:"days"},"days"),o.a.createElement(K,{value:"weeks"},"weeks")),o.a.createElement(R.a,{type:"vertical"}),o.a.createElement(d.a,{type:"primary",onClick:this.setPeriod},"Set!"),o.a.createElement(R.a,{type:"vertical"}),o.a.createElement(d.a,{type:"danger",onClick:this.setStop},"Stop!"))}}]),t}(o.a.Component),Y=a(68),Z=a.n(Y),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={posts:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=new Z.a({applicationId:"1eccca646ffdcffd33a902794c5086f1701713c20b2eb943a458880100bb677d",secret:"891c91a86a0842e6648925e8048cc35ede9986969db514e4e0ae6d8d811f1130",callbackUrl:"http://35.243.234.68:8000/auth"}),console.log(this.props),e.search.photos(this.props.match.params.keyword,1,20).catch(function(e){console.log(e)}).then(Y.toJson).then(function(e){t.setState({posts:e.results}),console.log(e)}),console.log(this.state.posts)}},{key:"componentDidUpdate",value:function(e,t){var a,n=this;e.match.params.keyword!==this.props.match.params.keyword&&(a=new Z.a({applicationId:"1eccca646ffdcffd33a902794c5086f1701713c20b2eb943a458880100bb677d",secret:"891c91a86a0842e6648925e8048cc35ede9986969db514e4e0ae6d8d811f1130",callbackUrl:"http://35.243.234.68:8000/auth"}),console.log(this.props),a.search.photos(this.props.match.params.keyword,1,20).catch(function(e){console.log(e)}).then(Y.toJson).then(function(e){n.setState({posts:e.results}),console.log(e),n.forceUpdate()}),console.log(this.state.posts))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(M,{pics:this.state.posts}))}}]),t}(o.a.Component),ee=I.a.Header,te=I.a.Content,ae=I.a.Footer,ne=I.a.Sider,oe=h.a.Search,re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={collapsed:!1},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.onSearch=function(e){console.log(e),a.props.history.push("/index/search/"+e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(S.a,null,o.a.createElement(I.a,{id:"index-layout"},o.a.createElement(ne,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},o.a.createElement("div",{className:"logo"}),o.a.createElement(U.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},o.a.createElement(U.a.Item,{key:"1",id:"home"},o.a.createElement(f.a,{type:"home",theme:"outlined"}),o.a.createElement("span",{className:"nav-text"},"Home"),o.a.createElement(v.a,{to:"/index"})),o.a.createElement(U.a.Item,{key:"2"},o.a.createElement(f.a,{type:"cloud-upload",theme:"outlined"}),o.a.createElement("span",{className:"nav-text"},"Upload"),o.a.createElement(v.a,{to:"/index/upload"})),o.a.createElement(U.a.Item,{key:"3",id:"likes"},o.a.createElement(f.a,{type:"heart",theme:"outlined"}),o.a.createElement("span",{className:"nav-text"},"Likes"),o.a.createElement(v.a,{to:"/index/likes"})),o.a.createElement(U.a.Item,{key:"4",id:"collects"},o.a.createElement(f.a,{type:"folder",theme:"outlined"}),o.a.createElement("span",{className:"nav-text"},"Collection"),o.a.createElement(v.a,{to:"/index/collection"})),o.a.createElement(U.a.Item,{key:"5"},o.a.createElement(f.a,{type:"setting",theme:"outlined"}),o.a.createElement("span",{className:"nav-text"},"Setting"),o.a.createElement(v.a,{to:"/index/setting"})))),o.a.createElement(I.a,{style:{marginLeft:200}},o.a.createElement(ee,{style:{background:"#fff",padding:0}},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(oe,{style:{marginLeft:10},placeholder:"want to find more?",onSearch:function(t){return e.onSearch(t)},enterButton:!0}))),o.a.createElement(te,{style:{margin:"16px 8px 0",overflow:"initial"}},o.a.createElement("div",{style:{padding:16,background:"#fff",textAlign:"center",minHeight:"100vh"}},o.a.createElement(x.a,null,o.a.createElement(P.a,{exact:!0,path:"/index",component:J}),o.a.createElement(P.a,{path:"/index/upload",component:_}),o.a.createElement(P.a,{path:"/index/likes",component:V}),o.a.createElement(P.a,{path:"/index/collection",component:B}),o.a.createElement(P.a,{path:"/index/setting",component:X}),o.a.createElement(P.a,{path:"/index/search/:keyword",component:$})))),o.a.createElement(ae,{style:{textAlign:"center"}},"Wallpaper Workshop \xa92018 Created by KetchUp"))))}}]),t}(o.a.Component),le=(Object(L.a)(re),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(S.a,null,o.a.createElement(x.a,null,o.a.createElement(P.a,{exact:!0,path:"/",component:C}),o.a.createElement(P.a,{path:"/index",component:re}),o.a.createElement(P.a,{exact:!0,path:"/register",component:j})))}}]),t}(o.a.Component));l.a.render(o.a.createElement(le,null),document.getElementById("root"))}},[[194,2,1]]]);
//# sourceMappingURL=main.e5f12457.chunk.js.map